<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>超市管理系统</title>
    <!-- jquser.min.js -->
    <script src="libs/jquery/jquery.min.js"></script>
    <!-- <script src="js/vue.min.js"></script> -->
    <script src="libs/vue/vue.js"></script>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="libs/element-ui/element-ui.css">
    <!-- 自己的样式 -->
    <link rel="stylesheet" href="css/index.css">
    <!-- 引入组件库 -->
    <script src="libs/element-ui/element-ui.js"></script>
    <!-- 引入过滤时间库 -->
    <script src="./libs/moment/moment.js"></script>
    <!-- 发送检测请求 是否登录的请求 -->
    <script src="/users/isLogin"></script>
</head>

<body>
    <div id="app">
        <el-container style="min-height: 100vh;">
            <el-aside width="300px">
                <!--  -->
                <!-- <side-title></side-title> -->
                <div id="side-title">
                    <h2>{{title}}</h2>
                    <p>你好,<a href="">{{userName}}</a></p>
                    <p><a href="/">管理首页</a> | <a href="/users/signOut">退出系统</a></p>
                </div>
                <!--  -->

                <el-menu :unique-opened="true" :default-openeds="['']">
                    <!-- 菜单一 -->
                    <el-submenu index="1">
                        <template slot="title"><i class="el-icon-message"></i>分类管理</template>
                        <el-menu-item-group>
                            <!-- <template slot="title">分组一</template> -->
                            <el-menu-item index="1-1"><a href="">分类管理</a></el-menu-item>
                            <el-menu-item index="1-2"><a href="">添加分类</a></el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                    <!-- 菜单二 -->
                    <el-submenu index="2">
                        <template slot="title"><i class="el-icon-menu"></i>商品管理</template>
                        <el-menu-item-group>
                            <el-menu-item index="2-1"><a href="">添加商品</a></el-menu-item>
                            <el-menu-item index="2-2"><a href="">商品管理</a></el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                    <!-- 菜单三-->
                    <el-submenu index="3">
                        <template slot="title"><i class="el-icon-setting"></i>进货管理</template>
                        <el-menu-item-group>
                            <el-menu-item index="3-1"><a href="">库存管理</a></el-menu-item>
                            <el-menu-item index="3-2"><a href="">添加库存</a></el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                    <!-- 菜单四-->
                    <el-submenu index="4">
                        <template slot="title"><i class="el-icon-setting"></i>出货管理</template>
                        <el-menu-item-group>
                            <el-menu-item index="4-1"><a href="">销售列表</a></el-menu-item>
                            <el-menu-item index="4-2"><a href="">商品出库</a></el-menu-item>
                            <el-menu-item index="4-3"><a href="">商品退货</a></el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                    <!-- 菜单四-->
                    <el-submenu index="5">
                        <template slot="title"><i class="el-icon-setting"></i>统计管理</template>
                        <el-menu-item-group>
                            <el-menu-item index="5-1"><a href="">销售统计</a></el-menu-item>
                            <el-menu-item index="5-2"><a href="">进货统计</a> </el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                    <!-- 菜单四-->
                    <el-submenu index="6">
                        <template slot="title"><i class="el-icon-setting"></i>账号管理</template>
                        <el-menu-item-group>
                            <el-menu-item index="6-1"><a href="./userList.html">账号管理</a></el-menu-item>
                            <el-menu-item index="6-2"><a href="./userAdd.html">添加账号</a></el-menu-item>
                            <el-menu-item index="6-3">密码修改</el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                    <!-- 菜单四-->
                    <el-submenu index="7">
                        <template slot="title"><i class="el-icon-setting"></i>会员管理</template>
                        <el-menu-item-group>
                            <el-menu-item index="7-1"><a href="">账号管理</a></el-menu-item>
                            <el-menu-item index="7-2"><a href="">添加账号</a></el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                    <!-- 菜单四-->
                    <el-submenu index="8">
                        <template slot="title"><i class="el-icon-setting"></i>系统管理</template>
                        <el-menu-item-group>
                            <el-menu-item index="8-1"><a href="">系统信息</a></el-menu-item>
                            <el-menu-item index="8-2"><a href="">系统配置</a></el-menu-item>
                            <el-menu-item index="8-3"><a href="">权限管理</a></el-menu-item>
                            <el-menu-item index="8-4"><a href="">添加管理组</a></el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                </el-menu>
                </el-menu>
            </el-aside>

            <section id="right-con">
                <el-container>
                    <el-header>
                        <h2>欢迎您 {{userName}}</h2>
                        <p>查看详细的系统信息</p>
                    </el-header>

                    <el-main>
                        <el-card class="box-card">
                            <div slot="header" class="clearfix">
                                <span>
                                    <h3>系统信息</h3>
                                </span>
                                <!-- <el-button style="float: right; padding: 3px 0" type="text">操作按钮</el-button> -->
                            </div>
                            <div class="text item">
                                <!-- 卡片盒子 内容 -->
                                <el-table :data="goodTypeTable" height="500" style="width: 100%">
                                  <el-table-column prop="typeName" label="分类名称" width="180">
                                  </el-table-column>
                                  <el-table-column prop="goodType" label="顶级分类" width="180">
                                  </el-table-column>
                                  <el-table-column prop="state" label="状态">
                                  </el-table-column>
                                  <el-table-column label="创建时间">
                                      <template slot-scope="scope">{{ scope.row.ctime | formatCtime }}</template>
                                  </el-table-column>
                                  <el-table-column label="操作">
                                      <template slot-scope="scope">
                                          <el-button size="mini" type="primary" @click="handleEdit(scope.row.id)">
                                              <i class="el-icon-edit"></i>
                                          </el-button>
                                          <!-- <el-button size="mini" type="danger" @click="handleDelete(scope.row.id)">
                                              <i class="el-icon-delete"></i>
                                              删除
                                          </el-button> -->
                                      </template>
                                  </el-table-column>
                                </el-table>
                            </div>
                        </el-card>
                        <!--
                        数据可建表
                        create table goodstype(
                            id int primary key auto_increment, // id
                            ctime TIMESTAMP  default CURRENT_TIMESTAMP, // 创建时间
                            goodType varchar(50),
                            typeName varchar(50),
                            state int
                        )
                       -->


                    </el-main>
                    <!-- 右侧尾部 -->
                    <el-footer>
                        <hr />
                        <p>&copy; Copyright 2018 华联超市管理系统</p>
                    </el-footer>
                </el-container>
            </section>
            <!--  -->
        </el-container>
    </div>
    <script>
        let vm = new Vue({
            el: '#app',
            data() {
                return {
                    goodTypeTable: [{
                      goodType: '家具电器',
                      typeName: '洗衣机',
                      state: '启用',
                      ctime:''
                    }],
                    title: '华联超市管理系统',
                    userName: 'admin'
                  };
                },
            created() {
                this.getLoginInfo();
                this.getTypeList();
            },
            methods: {
                // 获取登录的用户信息
                getLoginInfo() {
                    let _this = this;
                    // 获取 cookie 中的 路径
                    let userid = document.cookie;
                    let id = userid.split('userid=')[1].split(';')[0];
                    $.post('/getuser', {
                        "id": id
                    }, function (data) {
                        _this.userName = data[0].username;
                        console.log(_this.userName);
                    })
                },
                // 获取商品分类数据
                getTypeList(){
                  // 保留this
                  let _this = this;
                  $.get('/goods/typeList', function (data) {
                    _this.goodTypeTable = data;
                  })
                },

                // 编辑单条商品分类说
                handleEdit(id){
                  console.log(id);
                },
                // 删除单条商品分类
                handleDelete(id){
                  console.log(id);
                },
            },
            // 时间过滤器
            filters: {
                // 过滤时间
                formatCtime(value) {
                    return moment(value).format("YYYY-MM-DD HH:mm:ss");
                }
            }
        })
    </script>
</body>

</html>
